<section id="testimonials" class="testimonial-section section">
  <div class="container">
    <h2 class="section-title">What Our Customers Say</h2>
    
    <div class="testimonial-slider" *ngIf="!isLoading && !error">
      <div class="testimonial-track" [style.transform]="'translateX(-' + (activeSlide * 100) + '%)'">
        <div class="testimonial-slide" *ngFor="let testimonial of testimonials">
          <div class="testimonial-content">
            <div class="testimonial-rating">
              <span class="star" *ngFor="let star of generateStars(testimonial.rating)">
                <i class="fas fa-star"></i>
              </span>
            </div>
            
            <div class="testimonial-text">
              <p>{{ testimonial.comment }}</p>
            </div>
            
            <div class="testimonial-author">
              <div class="author-avatar" *ngIf="testimonial.avatar">
                <img [src]="testimonial.avatar" [alt]="testimonial.name">
              </div>
              <div class="author-avatar default-avatar" *ngIf="!testimonial.avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="author-name">{{ testimonial.name }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="testimonial-controls">
        <button class="control prev-btn" (click)="prevSlide()">
          <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="indicators">
          <button 
            *ngFor="let testimonial of testimonials; let i = index" 
            [class.active]="i === activeSlide"
            (click)="setCurrentSlide(i)">
          </button>
        </div>
        
        <button class="control next-btn" (click)="nextSlide()">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
    
    <!-- Loading state -->
    <div class="testimonial-loading" *ngIf="isLoading">
      <div class="spinner">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
      <p>Loading testimonials...</p>
    </div>
    
    <!-- Error state -->
    <div class="testimonial-error" *ngIf="error">
      <i class="fas fa-exclamation-circle"></i>
      <p>{{ error }}</p>
    </div>
  </div>
</section>